(this["webpackJsonpcounter-app"]=this["webpackJsonpcounter-app"]||[]).push([[0],{29:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),s=n.n(r),a=n(3),o=n.n(a),l=(n(29),n(2)),i=n(7),u=n(21),d=n(13),b=n.n(d),j=n(20),m=n(4),O=s.a.forwardRef((function(e,t){var n=Object(r.useContext)(w),s=Object(r.useContext)(k);console.log("CounterH render!");var a=e.singleCounter,o=e.modalOpen,l=e.counterToDelete,i={fontSize:"1.25rem",fontWeight:"bold"},u=Object(r.useMemo)((function(){var e="mt-2 mb-1 mb-sm-0 mt-md-0 mx-3 mx-sm-1 mx-md-1 mx-lg-0 mx-xl-2 ";return e+=0===a.value?"bwarning":"bprimary"}),[a.value]),d=Object(r.useMemo)((function(){var e=a.value;return 0===e?"Zero":e}),[a]),b=function(e){if(!0===a.adult){if("increment"===e)n.setAdultCounterClicked(a),s.setModalIsOpen(!0);else if("decrement"===e)return!1}else if(a.value>=10&&a.value%10===0&&"increment"===e)s.toastNotify(),n.countDispatch({type:e,counterNo:a});else if("increment"===e)n.countDispatch({type:e,counterNo:a});else if("decrement"===e&&a.value>0)n.countDispatch({type:e,counterNo:a});else if("decrement"===e&&a.value<=0)return!1};return Object(c.jsxs)("div",{className:"mt-4 row mx-0 px-0 align-items-start",ref:t,children:[Object(c.jsxs)("div",{className:"col-sm-4 col-lg-3 name-col text-center",children:[Object(c.jsx)("div",{className:"sm-caps bgr1 mx-2 mb-1",children:"Name:"}),Object(c.jsx)("div",{className:"fCol1 prodName",children:a.name})]}),Object(c.jsxs)("div",{className:"mt-sm-0 mt-3 col-md-2 col-sm-3 col-lg-2 text-center",children:[Object(c.jsx)("div",{className:"sm-caps bgr2 mx-2 mb-1",children:"Unit:"}),Object(c.jsx)("div",{className:"fCol1 unitQ mb-sm-0",children:a.unit})]}),Object(c.jsxs)("div",{className:"mt-sm-0 mt-3 col-md-2 col-sm-3 col-lg-2 text-center",children:[Object(c.jsx)("div",{className:"sm-caps bgr3 mx-2 mb-1",children:"Price:"}),Object(c.jsxs)("div",{className:"fCol2 price mb-sm-0",children:["$",a.price]})]}),Object(c.jsx)("div",{className:"w-50 d-none d-sm-block d-md-none"}),Object(c.jsxs)("div",{className:"col-lg-2 col-md-3 col-sm-4 mt-sm-0 mt-2 mb-2 mb-sm-0 text-center px-3 pr-sm-2",children:[Object(c.jsx)("div",{className:u,children:Object(c.jsx)("span",{className:"badge-no-text",children:d})}),Object(c.jsx)(m.a,{content:"Click to increment the number of the product to buy",disabled:n.disable,placement:"top-end",delay:100,children:Object(c.jsx)("button",{onClick:function(){return b("increment")},className:"btn btn-success btn-sm my-1 plus",children:Object(c.jsx)("span",{style:i,children:"+"})})}),Object(c.jsx)(m.a,{content:"Click to decrement the number of the product to buy",disabled:n.disable,placement:"top-end",delay:100,children:Object(c.jsx)("button",{onClick:function(){return b("decrement")},className:"btn btn-dark btn-sm my-1 mx-1 minus",children:Object(c.jsx)("span",{style:i,children:"-"})})}),Object(c.jsx)(m.a,{content:"Click to delete the product from the list",disabled:n.disable,placement:"top-end",delay:100,children:Object(c.jsx)("button",{onClick:function(e){o(!0),l(a)},className:"btn btn-danger btn-sm",children:"Del"})})]})]})})),f=s.a.memo(O),p=n(10),h=n.n(p);function x(e,t){return e.onModalIsOpen===t.onModalIsOpen}function v(e){var t=e.onHandleModalDelete,n=e.onSetModalIsOpen,r=e.onModalIsOpen;return console.log("Danger Fn"),Object(c.jsxs)(h.a,{className:"dialog-box border border-warning text-center py-4 px-5",isOpen:r,onRequestClose:function(){return n(!1)},shouldCloseOnOverlayClick:!1,style:{overlay:{backgroundColor:"rgba(169, 169, 180, 0.733)"},content:{color:"crimson",backgroundColor:"whitesmoke",padding:"30px"}},children:[Object(c.jsx)("div",{className:"btn-close2",children:Object(c.jsx)("button",{className:"btn btn-sm btn-basic btn-alert close-btn border-dark font-weight-bold",onClick:function(){return n(!1)},children:"X"})}),Object(c.jsx)("p",{className:"bg-warning mb-3 p-1 h5",children:"Danger Zone!"}),Object(c.jsx)("p",{className:"mb-4 confirm-age h6",children:"Confirm deleting the product!"}),Object(c.jsx)("h5",{className:"dialog-question text-center mx-auto",children:"Are you sure you want to delete the product from the list?"}),Object(c.jsx)("button",{className:"btn btn-danger btn-alert mr-5 mt-3",id:"yes",onClick:t,children:"YES"}),Object(c.jsx)("button",{className:"btn btn-primary btn-alert mt-3",id:"no",onClick:t,children:"NO"})]})}h.a.setAppElement("#root");var g=s.a.memo(v,x);var y=function(){var e=Object(r.useState)(Object(c.jsxs)("div",{className:"h5",children:[Object(c.jsx)("div",{className:"todayOffer mb-2",children:"Today's special offer!"}),Object(c.jsx)("div",{className:"mb-3",children:Object(c.jsxs)("span",{children:["* If you buy for more than"," ",Object(c.jsx)("span",{style:{color:"royalblue"},children:"$500"})," you will get"," ",Object(c.jsx)("span",{style:{color:"royalblue"},children:"10%"})," discount! *"]})})]})),t=Object(l.a)(e,2),n=t[0],s=t[1],a=Object(r.useRef)([]),o=Object(r.useState)(!1),i=Object(l.a)(o,2),u=i[0],d=i[1],O=Object(r.useState)({}),p=Object(l.a)(O,2),h=p[0],x=p[1],v=Object(r.useContext)(w),y=v.totalPrice,N=v.prevWholePrice;console.log("COUNTERSH render!"),Object(r.useEffect)((function(){(y<=500&&N>500||y>500&&N<=500)&&C()}),[y]);var C=Object(r.useCallback)(Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S;case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)}))),[y]),k=Object(r.useCallback)((function(e){e&&!a.current.includes(e)&&a.current.push(e)}),[]),S=Object(r.useMemo)((function(){return new Promise((function(e,t){void 0===y?t(new Error("Error to get total price!")):setTimeout((function(){e(y<=500?Object(c.jsxs)("div",{className:"h5",children:[Object(c.jsx)("div",{className:"todayOffer mb-2",children:"Today's special offer!"}),Object(c.jsx)("div",{className:"mb-3",children:Object(c.jsxs)("span",{children:["* If you buy for more than"," ",Object(c.jsx)("span",{style:{color:"royalblue"},children:"$500"})," you will get ",Object(c.jsx)("span",{style:{color:"royalblue"},children:"10%"})," ","discount! *"]})})]}):Object(c.jsxs)("div",{className:"h5",children:[Object(c.jsx)("div",{className:"todayOffer mb-2",children:"Congratulations!!!"}),Object(c.jsx)("div",{className:"mb-3",children:Object(c.jsxs)("span",{style:{fontWeight:"bold",color:"royalblue"},children:["* You've got"," ",Object(c.jsx)("span",{style:{color:"mediumvioletred"},children:"10%"})," ","DISCOUNT! *"]})})]}))}),550*v.durationTime)}))}),[y,v.durationTime]),T=function(e){d(e)},D=Object(r.useMemo)((function(){var e="btn text-center btn-sm ml-2 my-3 ";return e+=!1===v.disable?"btn-light":"btn-info"}),[v.disable]),M=Object(r.useMemo)((function(){return v.countState.map((function(e){return Object(c.jsx)(f,{singleCounter:e,ref:k,modalOpen:T,counterToDelete:x},e.id)}))}),[v.countState]);return Object(c.jsxs)("main",{className:"main m-0 p-sm-2 row",children:[Object(c.jsx)(g,{onCounterToBeDeleted:h,onModalIsOpen:u,onSetModalIsOpen:d,onHandleModalDelete:function(e){if(d(!1),"yes"!==e.target.id)return!1;v.countDispatch({type:"delete",counterNo:h})}}),Object(c.jsx)("div",{className:"offer pt-2 px-1 px-md-2 col-12 col-md-10",children:Object(c.jsxs)("div",{className:"h5 specialOffer",children:[n," "]})}),Object(c.jsx)("div",{className:"w-100"}),Object(c.jsx)("div",{className:"h5 ml-2 mt-3 mainTitle",children:"List of products in our shop:"}),Object(c.jsx)("div",{className:"w-100"}),Object(c.jsx)(m.a,{content:"Click to reset number of selected products to zero",placement:"top-start",disabled:v.disable,children:Object(c.jsx)("button",{onClick:function(){return v.countDispatch({type:"reset"})},className:"btn text-center btn-sm mx-2 my-3 reset",children:"Reset"})}),Object(c.jsx)(m.a,{content:Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{children:"Click to turn off / on tips"})}),placement:"left-end",disabled:v.disable,children:Object(c.jsx)("button",{onClick:function(){return v.setDisable(!v.disable)},className:D,children:!1===v.disable?"Turn off tips":"Turn on tips"})}),Object(c.jsx)("div",{className:"w-100"}),Object(c.jsx)("div",{className:"container mx-1 counters",children:M})]})},N=n(8),C=(n(41),n(42),Object(r.lazy)((function(){return n.e(5).then(n.bind(null,53))}))),w=s.a.createContext(),k=s.a.createContext(),S=[{id:0,value:0,name:"Coffe machine DeLonghi S 22.110.B",unit:"piece",price:200,adult:!1},{id:1,value:0,name:"Earl Grey Tea, 100 Tea Bags",unit:"box",price:10,adult:!1},{id:2,value:0,name:"Every Day Tea, 100 Tea Bags",unit:"box",price:12,adult:!1},{id:3,value:0,name:"Bordeaux 2018",unit:"bottle",price:20,adult:!0},{id:4,value:0,name:"Beer Tuborg",unit:"can",price:5,adult:!0}],T=function(e,t){var n,c=Object(u.a)(e);if("add"!==t.type&&"delete"!==t.type)c[n=e.indexOf(t.counterNo)]=Object(i.a)({},t.counterNo);else if("add"===t.type)c[n=e.length]=Object(i.a)({id:n,value:0},t.counterNo);else if("delete"===t.type){for(var r=0;r<c.length;r++)c[r]=Object(i.a)({},e[r]);c=c.filter((function(e){return e.id!==t.counterNo.id}));for(var s=0;s<c.length;s++)c[s].id=s}switch(t.type){case"increment":return c[n].value++,c;case"decrement":return c[n].value<=0||c[n].value--,c;case"yesAdult":return c[n].adult=!1,c[n].id===t.adultCounter.id&&c[n].value++,c;case"add":case"delete":return c;case"reset":return S;default:return e}};var D=function(e){var t=e.children,n=Object(r.useReducer)(T,S),a=Object(l.a)(n,2),o=a[0],i=a[1],u=Object(r.useRef)(o.reduce((function(e,t){return e+t.price*t.value}),0)),d=Object(r.useRef)(o.reduce((function(e,t){return e+t.value}),0)),b=Object(r.useState)(!1),j=Object(l.a)(b,2),m=j[0],O=j[1],f=Object(r.useState)(!1),p=Object(l.a)(f,2),h=p[0],x=p[1],v=Object(r.useState)({}),g=Object(l.a)(v,2),D=g[0],M=g[1];Object(r.useEffect)((function(){u.current=o.reduce((function(e,t){return e+t.price*t.value}),0),d.current=o.reduce((function(e,t){return e+t.value}),0)}),[o]),console.log("App render!"),Object(r.useEffect)((function(){console.log(t)}),[]);var E=function(){console.log("notify"),N.c.info("To get wholesales prices of our products you are more than welcome to contact with our office.",{position:"top-right",autoClose:8e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0,transition:N.a})},P=Object(r.useMemo)((function(){return o.reduce((function(e,t){return e+t.price*t.value}),0)}),[o]),I=Object(r.useCallback)((function(e){i({type:"add",counterNo:e})}),[o]),R=Object(r.useMemo)((function(){return{countState:o,countDispatch:i,prevWholePrice:u.current,prevWholeValue:d.current,totalPrice:P,durationTime:1.6,disable:m,setDisable:O,setAdultCounterClicked:M}}),[o,m]),A=Object(r.useMemo)((function(){return{toastNotify:E,setModalIsOpen:x}}),[o]),W=Object(c.jsx)("p",{children:"Loading..."});return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(r.Suspense,{fallback:W,children:Object(c.jsx)(C,{onModalIsOpen:h,onSetModalIsOpen:x,onCountObjects:o,onDispatch:i,onAdultCounterClicked:D})}),Object(c.jsxs)(w.Provider,{value:R,children:[s.a.cloneElement(t[0],{counterContext:R}),Object(c.jsx)(k.Provider,{value:A,children:Object(c.jsx)(y,{})}),Object(c.jsx)(r.Suspense,{fallback:Object(c.jsx)("p",{children:"Loading..."}),children:s.a.cloneElement(t[1],{onDisable:m,addPro:I})})]}),Object(c.jsx)(r.Suspense,{fallback:Object(c.jsx)("p",{children:"Loading..."}),children:s.a.cloneElement(t[2],{onDisable:m})}),Object(c.jsx)(N.b,{style:{textAlign:"justify"},limit:1}),Object(c.jsxs)("footer",{className:"text-center mx-auto my-1 footer py-1",children:["\xa9 2021 ",Object(c.jsx)("i",{children:"by"})," ",Object(c.jsx)("strong",{children:"codencja"})]})]})},M=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,54)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))},E=(n(43),n(14)),P=n.n(E);function I(e,t){return e.counterContext.countState===t.counterContext.countState}function R(e){var t=e.counterContext,n=Object(r.useState)("badge badge-pill ml-1 badge-warning"),s=Object(l.a)(n,2),a=s[0],o=s[1],i=t.totalPrice;Object(r.useEffect)((function(){d()}),[i]),console.log("Navbar render!");var u=Object(r.useMemo)((function(){return t.countState.reduce((function(e,t){return e+t.value}),0)}),[t.countState]),d=Object(r.useCallback)((function(){var e="badge badge-pill  ml-1 ";if(e+=0===u?"badge-warning":"badge-primary",!(t.prevWholeValue-u<=0))return new Promise((function(n,c){c.length>1?c(new Error("Error to get total price!")):setTimeout((function(){o(e),n(e)}),550*t.durationTime)}));o(e)}),[t.countState]);return Object(c.jsx)("nav",{className:"navbar navbar-light bg-light ml-2",children:Object(c.jsxs)("a",{className:"navbar-brand",href:"##",children:[Object(c.jsxs)("div",{className:"row mb-2",children:[Object(c.jsx)("div",{children:"Number of\xa0"}),Object(c.jsx)("span",{className:"font-weight-bold n1",children:"grades\xa0"}),"to buy:"," ",Object(c.jsx)("span",{className:"badge badge-pill badge-secondary ml-1 mr-0",children:t.countState.filter((function(e){return e.value>0})).length})]}),Object(c.jsxs)("div",{className:"row mb-2",children:[Object(c.jsx)("span",{children:"Number of\xa0"}),Object(c.jsx)("span",{className:"font-weight-bold n2",children:"products\xa0"}),"to buy:",Object(c.jsx)("span",{className:a,children:Object(c.jsx)(P.a,{start:t.prevWholeValue,end:u,duration:t.prevWholeValue-u<=0?.3:t.durationTime,children:function(e){var t=e.countUpRef;return Object(c.jsx)("div",{children:Object(c.jsx)("span",{ref:t})})}})})]}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("span",{className:"font-weight-bold n3",children:"Total price: "}),Object(c.jsx)("span",{className:"badge badge-pill badge-success ml-1 py-2",children:Object(c.jsx)(P.a,{start:t.prevWholePrice,end:t.totalPrice<=500?t.totalPrice:.9*t.totalPrice,duration:t.durationTime,prefix:"$",separator:",",children:function(e){var t=e.countUpRef;return Object(c.jsx)("div",{children:Object(c.jsx)("span",{ref:t})})}})})]})]})})}var A=s.a.memo(R,I),W=(n(45),Object(r.lazy)((function(){return n.e(6).then(n.bind(null,51))}))),B=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,52))}));o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsxs)(D,{children:[Object(c.jsx)(A,{}),Object(c.jsx)(B,{}),Object(c.jsx)(W,{})]})}),document.getElementById("root")),M()}},[[46,1,2]]]);
//# sourceMappingURL=main.9e783a0f.chunk.js.map